<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è–èª•æ­¡æ¨‚æ´¾å° â€” æ‘¸å½©çƒèˆ‡è–èª•æ­Œ</title>
  <style>
    :root{--green:#0b6b3a;--red:#b71c1c;--gold:#f3c84b;--bg:#f7fbff}
    html,body{height:100%;margin:0;font-family: "Noto Sans TC", "Microsoft JhengHei", system-ui, sans-serif;background:linear-gradient(180deg,#f7fbff 0%, #f0f7ff 100%);color:#213028}
    .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;padding:22px}
    header{width:100%;max-width:1100px;display:flex;align-items:center;justify-content:space-between}
    h1{margin:0;font-size:1.6rem;color:var(--green);display:flex;gap:10px;align-items:center}
    .sub{color:#44655b}
    .stage{margin-top:18px;width:100%;max-width:1100px;display:flex;gap:20px}
    .left{flex:1}

    /* raffle ball */
    .ball-area{display:flex;flex-direction:column;align-items:center;gap:12px}
    .ball-wrapper{width:340px;height:340px;display:flex;align-items:center;justify-content:center;position:relative}
    .ball{width:260px;height:260px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.1rem;color:white;box-shadow:0 12px 30px rgba(0,0,0,0.18);transition:transform 400ms ease}
    .ball.red{background:linear-gradient(180deg,var(--red),#8e1717)}
    .ball.green{background:linear-gradient(180deg,var(--green),#07522b)}
    .ball.gold{background:linear-gradient(180deg,var(--gold),#d9a800);color:#2c2c2c}

    .ball-number{font-size:2.4rem;letter-spacing:2px}
    .ornaments{position:absolute;inset:14px;pointer-events:none}

    .back-card{width:320px;border-radius:12px;padding:16px;background:rgba(255,255,255,0.9);box-shadow:0 6px 18px rgba(0,0,0,0.08);text-align:center}
    .verse{font-size:1rem;line-height:1.6;margin-top:8px;color:#1f2f2a}
    .ref{font-weight:700;margin-top:8px;color:#6b4a3a}
    .prayer{margin-top:10px;padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff9f7,#fffefc);color:#2b2b2b}

    .controls{display:flex;gap:8px;margin-top:12px}
    button{background:var(--red);color:var(--gold);border:none;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:800}
    button.secondary{background:white;border:2px solid var(--red);color:var(--red);font-weight:800}

    aside{width:320px}
    .list{background:rgba(255,255,255,0.95);padding:12px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,0.06)}
    .list h3{margin:0 0 8px 0;color:var(--green)}

    /* decorative snow & lights */
    .snow{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:1}
    .lights{position:fixed;top:8px;left:50%;transform:translateX(-50%);display:flex;gap:8px;z-index:11}
    .light{width:14px;height:22px;border-radius:6px;background:var(--gold);box-shadow:0 6px 14px rgba(0,0,0,0.12)}

    footer{margin-top:20px;color:#566a61;font-size:0.9rem}
    @media (max-width:920px){.stage{flex-direction:column}.aside{width:100%}aside{width:100%}}
  </style>
</head>
<body>
  <canvas id="snow" class="snow"></canvas>
  <div class="lights" aria-hidden="true">
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
    <div class="light"></div>
  </div>

  <div class="wrap">
    <header>
      <div>
        <h1>è–èª•æ­¡æ¨‚æ´¾å° â€” æ‘¸å½©çƒ ğŸ„</h1>
        <div class="sub">åœ¨æ´¾å°ä¸­æŠ½ä¸€é¡†æ‘¸å½©çƒï¼Œé¡¯ç¤ºä¸€å¥ç¶“æ–‡èˆ‡æº«æš–ç¦±å‘Šï¼Œä¸¦æ’­æ”¾è–èª•æ­¡æ¨‚æ—‹å¾‹ã€‚</div>
      </div>
      <div class="meta">ä½œè€…ï¼šChatGPT ç¯„ä¾‹ç‰ˆ</div>
    </header>

    <div class="stage">
      <div class="left">
        <div class="ball-area">
          <div class="ball-wrapper">
            <div id="ball" class="ball red" role="img" aria-label="æ‘¸å½©çƒ">
              <div style="text-align:center">
                <div style="opacity:0.9;font-size:0.85rem">æ‘¸å½©çƒ</div>
                <div id="ballNumber" class="ball-number">â€”</div>
              </div>
            </div>
            <div class="ornaments" aria-hidden="true">
              <!-- small decorative SVGs -->
              <svg width="340" height="340" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg" style="position:absolute;left:0;top:0;opacity:0.18">
                <circle cx="30" cy="40" r="6" fill="#fff"/>
                <circle cx="170" cy="60" r="4" fill="#fff"/>
                <circle cx="50" cy="170" r="3" fill="#fff"/>
                <circle cx="150" cy="150" r="5" fill="#fff"/>
              </svg>
            </div>
          </div>

          <div class="back-card" id="infoCard">
            <div style="font-weight:900;color:var(--green)">ç¶“æ–‡</div>
            <div id="verse" class="verse">â€”</div>
            <div id="ref" class="ref">â€”</div>
            <div id="prayer" class="prayer">â€”</div>

            <div class="controls">
              <button id="draw">æ‘¸å½©</button>
              <button id="shuffle" class="secondary">æ´—çƒ</button>
              <button id="playSong" class="secondary">æ’­æ”¾/æš«åœè–èª•æ­Œ</button>
              <button id="copy" class="secondary">è¤‡è£½ç¦±å‘Š</button>
            </div>
          </div>
        </div>
      </div>

      <aside>
        <div class="list">
          <h3>ä½¿ç”¨èªªæ˜</h3>
          <p>æŒ‰ã€Œæ‘¸å½©ã€æœƒéš¨æ©ŸæŠ½ä¸€é¡†çƒï¼ˆç·¨è™Ÿèˆ‡é¡è‰²ï¼‰ï¼Œé¡¯ç¤ºç¶“æ–‡èˆ‡å°æ‡‰ç¦±å‘Šã€‚æŒ‰ã€Œæ´—çƒã€å¯é‡ç½®ä¸¦é‡æ–°æ´—ç‰Œã€‚ä½ ä¹Ÿå¯ä»¥æ’­æ”¾å…§å»ºçš„è–èª•æ—‹å¾‹ä½œç‚ºèƒŒæ™¯éŸ³æ¨‚ã€‚</p>
          <h3 style="margin-top:10px">æ´¾å°å°æŠ€å·§</h3>
          <p>æŠŠé é¢æ”¾å¤§ã€æŠ•å½±åˆ°ç‰†ä¸Šï¼Œå¤§å®¶è¼ªæµæ‘¸å½©çƒä¸¦ç‚ºè¢«æŠ½åˆ°çš„äººç¦±å‘Šæˆ–ç»ä¸Šç¥ç¦ã€‚</p>
        </div>
      </aside>
    </div>

    <footer>ç¥ç¦ä½ æœ‰å€‹æº«æš–åˆæ­¡æ¨‚çš„è–èª•æ´¾å° ğŸ</footer>
  </div>

  <script>
    // ç¶“æ–‡èˆ‡ç¦±å‘Šï¼ˆä¿ç•™å…ˆå‰å…§å®¹ï¼Œç¨ä½œè–èª•èªå¢ƒèª¿æ•´ï¼‰
    const deck = [
      {ref:'è©©ç¯‡ 20:4',verse:'é¡˜ä»–å› ä½ çš„å¿ƒè£¡æ‰€é¡˜è³œä½ æˆå°±ï¼Œä¸¦æˆå…¨ä½ ä¸€åˆ‡çš„ç±Œç®—ã€‚',prayer:'ä¸»ï¼Œæ±‚ç¥¢åœ¨é€™è–èª•å­£æˆå°±ä½ å°æˆ‘çš„ç¾æ„ï¼Œä½¿æˆ‘èˆ‡å®¶äººåœ¨æ„›ä¸­åŒè¡Œï¼Œå½¼æ­¤æ‰¶æŒã€‚'},
      {ref:'è…“ç«‹æ¯”æ›¸ 4:6-7',verse:'æ‡‰ç•¶ä¸€ç„¡æ›æ…®ï¼Œåªè¦å‡¡äº‹è—‰è‘—ç¦±å‘Šã€ç¥ˆæ±‚ï¼Œå’Œæ„Ÿè¬ï¼Œå°‡ä½ å€‘æ‰€è¦çš„å‘Šè¨´ç¥ã€‚',prayer:'ä¸»ï¼Œæ„Ÿè¬ç¥¢çš„æ©å…¸ï¼Œæ±‚ç¥¢å¹«åŠ©æˆ‘åœ¨æ…¶ç¥ä¸­ä»å­˜è¬™å‘èˆ‡æ„Ÿæ©çš„å¿ƒï¼ŒæŠŠä¸€åˆ‡äº¤è¨—çµ¦ç¥¢ã€‚'},
      {ref:'ä»¥è³½äºæ›¸ 9:6',verse:'å› æœ‰ä¸€å¬°å­©ç‚ºæˆ‘å€‘è€Œç”Ÿï¼Œæœ‰ä¸€å­è³œçµ¦æˆ‘å€‘ï¼Œæ”¿æ¬Šå¿…æ“”åœ¨ä»–è‚©é ­ä¸Šã€‚',prayer:'æ„Ÿè¬ä¸»è³œä¸‹æ•‘ä¸»ï¼Œåœ¨é€™è–èª•ï¼Œé¡˜æˆ‘å€‘ä»¥è®šç¾è¿æ¥ç¥‚çš„é™è‡¨èˆ‡å¹³å®‰ã€‚'},
      {ref:'è·¯åŠ ç¦éŸ³ 2:10-11',verse:'é‚£å¤©ä½¿å°ä»–å€‘èªªï¼Œä¸è¦æ‡¼æ€•ï¼çœ‹å“ªï¼Œæˆ‘å ±çµ¦ä½ å€‘å¤§å–œçš„ä¿¡æ¯ï¼Œä»Šå¤©åœ¨å¤§è¡›çš„åŸè£¡ï¼Œç‚ºä½ å€‘ç”Ÿäº†æ•‘ä¸»ï¼Œç¥‚å°±æ˜¯ä¸»åŸºç£ã€‚',prayer:'ä¸»ï¼Œè®“æˆ‘å€‘åœ¨æ­¡æ¬£ä¸­è¨˜å¿µç¥¢çš„æ•‘è´–ï¼Œå°‡é€™å–œæ¨‚åˆ†äº«çµ¦å‘¨é­çš„äººã€‚'},
      {ref:'è©©ç¯‡ 23:1',verse:'è€¶å’Œè¯æ˜¯æˆ‘çš„ç‰§è€…ï¼Œæˆ‘å¿…ä¸è‡´ç¼ºä¹ã€‚',prayer:'åœ¨é€™å†¬æ—¥èˆ‡æ…¶å…¸ä¸­ï¼Œé¡˜ä¸»åšæˆ‘å€‘çš„ç‰§è€…ï¼Œè³œä¸‹éœ€è¦çš„ä¾›æ‡‰èˆ‡å®‰æ…°ã€‚'},
      {ref:'é¦¬å¤ªç¦éŸ³ 6:33',verse:'ä½ å€‘è¦å…ˆæ±‚ä»–çš„åœ‹å’Œä»–çš„ç¾©ï¼Œé€™äº›æ±è¥¿éƒ½è¦åŠ çµ¦ä½ å€‘äº†ã€‚',prayer:'ä¸»ï¼Œå¹«åŠ©æˆ‘æŠŠç¥¢æ”¾åœ¨é¦–ä½ï¼Œè®“æˆ‘çš„æ…¶ç¥æ›´æœ‰æ„ç¾©ï¼Œæ´»å‡ºç¥¢çš„å…¬ç¾©èˆ‡æ„›ã€‚'},
      {ref:'è©©ç¯‡ 118:24',verse:'é€™æ˜¯è€¶å’Œè¯æ‰€å®šçš„æ—¥å­ï¼Œæˆ‘å€‘åœ¨å…¶ä¸­è¦é«˜èˆˆæ­¡å–œã€‚',prayer:'è¬è¬ä¸»è³œä¸‹ä»Šæ—¥çš„å–œæ¨‚ï¼Œæ•™æˆ‘åœ¨ç¯€æœŸä¸­ä»ä»¥ç¥¢ç‚ºæ¨‚ã€‚'},
      {ref:'å“¥æ—å¤šå¾Œæ›¸ 9:8',verse:'ç¥èƒ½ä½¿å„æ¨£çš„æ©æƒ å¤šå¤šçš„åŠ çµ¦ä½ å€‘ï¼Œä½¿ä½ å€‘å‡¡äº‹å¸¸å¸¸å……è¶³ã€‚',prayer:'ä¸»ï¼Œé¡˜ç¥¢ä½¿æˆ‘å€‘åœ¨ç‰©è³ªèˆ‡å¿ƒéˆä¸Šå……è¶³ï¼Œå¥½å°‡ç¥ç¦æµå‘ä»–äººã€‚'},
      {ref:'ç®´è¨€ 3:5-6',verse:'ä½ è¦å°ˆå¿ƒä»°è³´è€¶å’Œè¯ï¼Œä¸å¯å€šé è‡ªå·±çš„è°æ˜ã€‚',prayer:'åœ¨ç¯€æœŸçš„å¿™ç¢Œä¸­ï¼Œé¡˜æˆ‘å­¸ç¿’ä¿¡é ç¥¢çš„å¸¶é ˜ï¼Œå‡¡äº‹èªå®šç¥¢ã€‚'},
      {ref:'ç¾…é¦¬æ›¸ 15:13',verse:'ä½†é¡˜ä½¿äººæœ‰ç›¼æœ›çš„ç¥ï¼Œå› ä¿¡å°‡è«¸èˆ¬çš„å–œæ¨‚å¹³å®‰å……æ»¿ä½ å€‘çš„å¿ƒã€‚',prayer:'è®“æˆ‘çš„å¿ƒè¢«ç›¼æœ›èˆ‡å–œæ¨‚å……æ»¿ï¼Œæˆç‚ºåˆ¥äººçš„å…‰èˆ‡ç›¼æœ›ã€‚'},
      {ref:'è©©ç¯‡ 46:1',verse:'ç¥æ˜¯æˆ‘å€‘çš„é¿é›£æ‰€å’ŒåŠ›é‡ï¼Œæ˜¯æˆ‘å€‘éš¨æ™‚çš„å¹«åŠ©ã€‚',prayer:'ç•¶æˆ‘å€‘æ„Ÿåˆ°ç–²æ†Šï¼Œæ±‚ç¥¢æˆç‚ºé¿é›£æ‰€ï¼Œè³œå®‰æ…°èˆ‡åŠ›é‡ã€‚'},
      {ref:'ç”³å‘½è¨˜ 31:6',verse:'ä½ è¦å‰›å¼·å£¯è†½ï¼Œä¸è¦æ‡¼æ€•ï¼Œä¹Ÿä¸è¦ç•æ‡¼ï¼Œå› ç‚ºè€¶å’Œè¯ä½ çš„ç¥å¿…èˆ‡ä½ åŒå»ã€‚',prayer:'ä¸»ï¼Œèˆ‡æˆ‘å€‘åŒè¡Œï¼Œè³œå‹‡æ°£é¢å°æœªçŸ¥ï¼ŒæŠŠæ…¶ç¥åŒ–ç‚ºç¥ç¦çš„è¡Œå‹•ã€‚'}
    ];

    let pool = [...deck];

    const ballEl = document.getElementById('ball');
    const ballNumberEl = document.getElementById('ballNumber');
    const verseEl = document.getElementById('verse');
    const refEl = document.getElementById('ref');
    const prayerEl = document.getElementById('prayer');
    const drawBtn = document.getElementById('draw');
    const shuffleBtn = document.getElementById('shuffle');
    const copyBtn = document.getElementById('copy');
    const playBtn = document.getElementById('playSong');

    function shuffleArray(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}

    function resetBall(){
      ballNumberEl.textContent='â€”';
      verseEl.textContent='â€”';refEl.textContent='â€”';prayerEl.textContent='â€”';
      ballEl.className='ball red';
      ballEl.style.transform='scale(1)';
    }

    shuffleBtn.addEventListener('click',()=>{pool=[...deck];shuffleArray(pool);resetBall();});

    drawBtn.addEventListener('click',()=>{
      if(pool.length===0){alert('æ‰€æœ‰çƒå·²æŠ½å®Œï¼Œå·²è‡ªå‹•é‡æ´—ã€‚');pool=[...deck];shuffleArray(pool);}
      const idx = Math.floor(Math.random()*3); // pick color index 0,1,2
      const colors = ['red','green','gold'];
      const color = colors[idx];
      ballEl.className = 'ball '+color;
      // animate pop
      ballEl.style.transform='scale(1.08)';setTimeout(()=>ballEl.style.transform='scale(1)',260);

      const card = pool.pop();
      // give each card a number for fun
      const number = Math.floor(Math.random()*99)+1;
      ballNumberEl.textContent = number.toString().padStart(2,'0');
      verseEl.textContent = card.verse;
      refEl.textContent = card.ref;
      prayerEl.textContent = card.prayer;
    });

    copyBtn.addEventListener('click',async()=>{
      const text = `${verseEl.textContent}
${refEl.textContent}

ç¦±å‘Šï¼š${prayerEl.textContent}`;
      try{await navigator.clipboard.writeText(text);copyBtn.textContent='å·²è¤‡è£½';setTimeout(()=>copyBtn.textContent='è¤‡è£½ç¦±å‘Š',1200);}catch(e){alert('ç„¡æ³•è¤‡è£½ï¼Œè«‹æ‰‹å‹•é¸å–ä¸¦è¤‡è£½ã€‚');}
    });

    // --- simple WebAudio Jingle Bells synth player (no external file) ---
    let audioCtx=null;let isPlaying=false;let currentTimerIds=[];
    // jingle bells melody (notes in Hz and durations)
    const noteMap = { 'B4':493.88,'A4':440.00,'G4':392.00,'E4':329.63,'D4':293.66,'C4':261.63,'F4':349.23};
    const melody = [
      ['E4',0.5],['E4',0.5],['E4',1.0],
      ['E4',0.5],['E4',0.5],['E4',1.0],
      ['E4',0.5],['G4',0.5],['C4',0.5],['D4',0.5],['E4',2.0],
      ['F4',0.5],['F4',0.5],['F4',0.5],['F4',0.5],['F4',0.5],['E4',0.5],['E4',0.5],['E4',0.5],['E4',0.5],
      ['E4',0.5],['D4',0.5],['D4',0.5],['E4',0.5],['D4',1.0],['G4',1.0]
    ];

    function playMelody(){
      if(isPlaying){stopMelody();return}
      if(!audioCtx) audioCtx = new (window.AudioContext||window.webkitAudioContext)();
      isPlaying=true;playBtn.textContent='æš«åœè–èª•æ­Œ';
      let t=0;const tempo=420; // ms per beat
      melody.forEach(([note,len],i)=>{
        const start = t;const dur = len * (tempo/1000);
        const id = setTimeout(()=>{
          const o = audioCtx.createOscillator();
          const g = audioCtx.createGain();
          o.type='sine';o.frequency.value = noteMap[note] || 440;
          g.gain.value=0.0001;
          o.connect(g);g.connect(audioCtx.destination);
          o.start();
          // simple attack/decay
          g.gain.exponentialRampToValueAtTime(0.12,audioCtx.currentTime+0.02);
          setTimeout(()=>{g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+dur+0.02);o.stop(audioCtx.currentTime+dur+0.03);},dur*1000);
        }, start*1000);
        currentTimerIds.push(id);
        t += len* (tempo/1000);
      });
      // stop after melody length
      const endId = setTimeout(()=>{isPlaying=false;playBtn.textContent='æ’­æ”¾/æš«åœè–èª•æ­Œ';currentTimerIds=[];}, t*1000+200);
      currentTimerIds.push(endId);
    }
    function stopMelody(){currentTimerIds.forEach(id=>clearTimeout(id));currentTimerIds=[];isPlaying=false;playBtn.textContent='æ’­æ”¾/æš«åœè–èª•æ­Œ';}

    playBtn.addEventListener('click',()=>{
      // resume context on user gesture if needed
      if(!audioCtx){audioCtx = new (window.AudioContext||window.webkitAudioContext)();}
      if(isPlaying){stopMelody();}else{playMelody();}
    });

    // --- snow animation ---
    const canvas = document.getElementById('snow');
    const ctx = canvas.getContext('2d');
    let W, H, flakes=[];
    function initSnow(){W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight;flakes=[];for(let i=0;i<120;i++){flakes.push({x:Math.random()*W,y:Math.random()*H,radius:Math.random()*3+1,dx:Math.random()*1-0.5,dy:Math.random()*1+0.2});}}
    function draw(){ctx.clearRect(0,0,W,H);ctx.fillStyle='rgba(255,255,255,0.9)';for(const f of flakes){ctx.beginPath();ctx.arc(f.x,f.y,f.radius,0,Math.PI*2);ctx.fill();f.x += f.dx; f.y += f.dy; if(f.y>H){f.y=-10;f.x=Math.random()*W;} if(f.x>W)f.x=0;if(f.x<0)f.x=W;}requestAnimationFrame(draw);}window.addEventListener('resize',initSnow);initSnow();draw();

    // init
    (function init(){shuffleArray(pool);}());
  </script>
</body>
</html>
